<#
Bootstrap script for this repository.

What it does:
- Recreates the current repo snapshot by writing files from a base64 manifest.

How to use:
- From repo root: .\scripts\bootstrap.ps1
- Or pass a target path: .\scripts\bootstrap.ps1 -TargetRoot C:\path\to\repo
#>
param([string]$TargetRoot = (Get-Location))

# Snapshot manifest. Each entry has a repo-relative path and base64-encoded bytes.
$manifest = @(
  @{ path = 'README.md'; b64 = '77u/IyBGYWNlIEthcmFva2UgQUkKCk1vbm9yZXBvIGbDvHIgKipGYWNlIEthcmFva2UgQUkqKjogZWluIGxva2FsZXMgQmFja2VuZCAoRmFzdEFQSSArIFdlYlNvY2tldCkgdW5kIGVpbiBGcm9udGVuZCAoUmVhY3QgKyBWaXRlICsgVHlwZVNjcmlwdCkgbWl0IFdlYmNhbS1QcmV2aWV3LCBDYW52YXMtT3ZlcmxheSB1bmQgc3DDpHRlcmVyIFdlYi1BdWRpby1BbmFseXNlIChXZWIgQXVkaW8pLiBaaWVsIGlzdCBlaW5lIHNjaGxhbmtlIE1WUC1VbXNldHp1bmcgbWl0IGtsYXJlbiBTY2huaXR0c3RlbGxlbiBmw7xyIFRyYWNraW5nL0luZmVyZW5jZSAoWU9MT3Y4KSBpbSBCYWNrZW5kLgoKRGllc2VzIFJlcG9zaXRvcnkgZm9sZ3QgZWluZXIgSXNzdWUtYnktSXNzdWUtUm9hZG1hcC4gRGllIFNwZXppZmlrYXRpb25lbiBsaWVnZW4gaW4gYGRvY3MvYCB1bmQgd2VyZGVuIGFscyBTb3VyY2Ugb2YgVHJ1dGggZ2VudXR6dC4KCioqUXVpY2tzdGFydCoqCgpCYWNrZW5kIChGYXN0QVBJKToKMS4gYGNkIGJhY2tlbmRgCjIuIGBweXRob24gLW0gdmVudiAudmVudmAKMy4gYC5cLnZlbnZcU2NyaXB0c1xBY3RpdmF0ZS5wczFgCjQuIGBwaXAgaW5zdGFsbCAtciByZXF1aXJlbWVudHMudHh0YAo1LiBgdXZpY29ybiBhcHAubWFpbjphcHAgLS1yZWxvYWQgLS1ob3N0IDAuMC4wLjAgLS1wb3J0IDgwMDBgCjYuIGBjdXJsIGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9oZWFsdGhgCgpGcm9udGVuZCAoVml0ZSArIFJlYWN0ICsgVHlwZVNjcmlwdCk6CjEuIGBjZCBmcm9udGVuZGAKMi4gYG5wbSBpbnN0YWxsYAozLiBgbnBtIHJ1biBkZXZgCgpEb2t1bWVudGU6Ci0gYGRvY3MvbXZwLm1kYAotIGBkb2NzL3JvYWRtYXAubWRgCi0gYGRvY3MvYXJjaGl0ZWN0dXJlLm1kYAotIGBkb2NzL21ldHJpY3MtY2hlY2tsaXN0Lm1kYAoKSGlud2VpczogRGFzIEJhY2tlbmQgbMOkdWZ0IGxva2FsLiBHaXRIdWIgUGFnZXMgRGVwbG95bWVudCBmw7xyIGRhcyBGcm9udGVuZCBmb2xndCBpbiBlaW5lbSBzcMOkdGVyZW4gSXNzdWUuDQo=' }
  @{ path = '.gitignore'; b64 = '77u/IyBQeXRob24KX19weWNhY2hlX18vCioucHljCi52ZW52Lwp2ZW52LwouZW52Ci5lbnYubG9jYWwKCiMgUnVmZiAvIE15cHkKLnJ1ZmZfY2FjaGUvCi5teXB5X2NhY2hlLwoKIyBOb2RlCm5vZGVfbW9kdWxlcy8KZnJvbnRlbmQvbm9kZV9tb2R1bGVzLwpmcm9udGVuZC9kaXN0LwoKIyBCdWlsZAoqKi9kaXN0LwoKIyBPUyAvIElERQouRFNfU3RvcmUKLmlkZWEvCi52c2NvZGUvDQo=' }
  @{ path = 'pyproject.toml'; b64 = '77u/W3Rvb2wucnVmZl0KbGluZS1sZW5ndGggPSAxMDAKdGFyZ2V0LXZlcnNpb24gPSAicHkzMTEiCmV4dGVuZC1leGNsdWRlID0gWwogICIudmVudiIsCiAgInZlbnYiLAogICJub2RlX21vZHVsZXMiLAogICJkaXN0IiwKICAiZnJvbnRlbmQiCl0KClt0b29sLnJ1ZmYubGludF0Kc2VsZWN0ID0gWyJFIiwgIkYiLCAiSSIsICJCIiwgIlVQIl0KaWdub3JlID0gWyJFMjAzIiwgIkU1MDEiXQ0K' }
  @{ path = 'docs/mvp.md'; b64 = '77u/IyBNVlAKClN0YXR1czogUGxhY2Vob2xkZXIgKGVyc3RlbGx0IHfDpGhyZW5kIE1pbGVzdG9uZSAwIC8gSXNzdWUgMC4xICsgMC4yKS4KCkRpZXNlcyBEb2t1bWVudCBpc3QgZGllIFF1ZWxsZSBkZXIgV2FocmhlaXQgZsO8ciBkaWUgTVZQLVNwZXppZmlrYXRpb24uIEJpdHRlIG1pdCBkZW4gdGF0c8OkY2hsaWNoZW4gQW5mb3JkZXJ1bmdlbiBlcnNldHplbi4NCg==' }
  @{ path = 'docs/roadmap.md'; b64 = '77u/IyBSb2FkbWFwCgpTdGF0dXM6IFBsYWNlaG9sZGVyIChlcnN0ZWxsdCB3w6RocmVuZCBNaWxlc3RvbmUgMCAvIElzc3VlIDAuMSArIDAuMikuCgpEaWVzZXMgRG9rdW1lbnQgaXN0IGRpZSBRdWVsbGUgZGVyIFdhaHJoZWl0IGbDvHIgZGllIFJvYWRtYXAuIEJpdHRlIG1pdCBkZXIgdGF0c8OkY2hsaWNoZW4gUm9hZG1hcCBlcnNldHplbi4NCg==' }
  @{ path = 'docs/architecture.md'; b64 = '77u/IyBBcmNoaXRlY3R1cmUKClN0YXR1czogUGxhY2Vob2xkZXIgKGVyc3RlbGx0IHfDpGhyZW5kIE1pbGVzdG9uZSAwIC8gSXNzdWUgMC4xICsgMC4yKS4KCkRpZXNlcyBEb2t1bWVudCBpc3QgZGllIFF1ZWxsZSBkZXIgV2FocmhlaXQgZsO8ciBBcmNoaXRla3R1ci1FbnRzY2hlaWR1bmdlbi4gQml0dGUgbWl0IGRlciB0YXRzw6RjaGxpY2hlbiBBcmNoaXRla3R1ciBlcnNldHplbi4NCg==' }
  @{ path = 'docs/metrics-checklist.md'; b64 = '77u/IyBNZXRyaWNzIENoZWNrbGlzdAoKU3RhdHVzOiBQbGFjZWhvbGRlciAoZXJzdGVsbHQgd8OkaHJlbmQgTWlsZXN0b25lIDAgLyBJc3N1ZSAwLjEgKyAwLjIpLgoKRGllc2VzIERva3VtZW50IGlzdCBkaWUgUXVlbGxlIGRlciBXYWhyaGVpdCBmw7xyIE1ldHJpa2VuIHVuZCBNZXNzcHVua3RlLiBCaXR0ZSBtaXQgZGVyIHRhdHPDpGNobGljaGVuIENoZWNrbGlzdGUgZXJzZXR6ZW4uDQo=' }
  @{ path = 'docs/adr/0001-missing-specs.md'; b64 = '77u/IyBBRFIgMDAwMTogTWlzc2luZyBTb3VyY2UgU3BlY3MgYXQgQm9vdHN0cmFwCgpEYXRlOiAyMDI2LTAyLTA1ClN0YXR1czogQWNjZXB0ZWQKCiMjIENvbnRleHQKRGllIFNwZXppZmlrYXRpb25zZG9rdW1lbnRlIChgZG9jcy9tdnAubWRgLCBgZG9jcy9yb2FkbWFwLm1kYCwgYGRvY3MvYXJjaGl0ZWN0dXJlLm1kYCwgYGRvY3MvbWV0cmljcy1jaGVja2xpc3QubWRgKSB3YXJlbiBiZWltIFByb2pla3RzdGFydCBuaWNodCB2b3JoYW5kZW4uCgojIyBEZWNpc2lvbgpGw7xyIE1pbGVzdG9uZSAwIC8gSXNzdWUgMC4xICsgMC4yIHd1cmRlIGVpbiBtaW5pbWFsZXMgR2Vyw7xzdCBlcnN0ZWxsdCB1bmQgUGxhY2Vob2xkZXItRG9rdW1lbnRlIGFuZ2VsZWd0LCBkYW1pdCBkaWUgU3RydWt0dXIsIFRvb2xpbmcgdW5kIGRhcyBHcnVuZGdlcsO8c3QgYXVmZ2ViYXV0IHdlcmRlbiBrw7ZubmVuLgoKIyMgQ29uc2VxdWVuY2VzCkRpZSBQbGFjZWhvbGRlci1Eb2t1bWVudGUgbcO8c3NlbiB6ZWl0bmFoIGR1cmNoIGRpZSB0YXRzw6RjaGxpY2hlbiBTcGV6aWZpa2F0aW9uZW4gZXJzZXR6dCB3ZXJkZW4uIFdlaXRlcmUgSXNzdWVzIHNvbGx0ZW4gZGFuYWNoIHN0cmlrdCBhbmhhbmQgZGVyIGZpbmFsZW4gU3BlemlmaWthdGlvbiB1bWdlc2V0enQgd2VyZGVuLg0K' }
  @{ path = 'frontend/package.json'; b64 = '77u/ewogICJuYW1lIjogImZhY2Uta2FyYW9rZS1mcm9udGVuZCIsCiAgInByaXZhdGUiOiB0cnVlLAogICJ2ZXJzaW9uIjogIjAuMC4wIiwKICAidHlwZSI6ICJtb2R1bGUiLAogICJzY3JpcHRzIjogewogICAgImRldiI6ICJ2aXRlIiwKICAgICJidWlsZCI6ICJ2aXRlIGJ1aWxkIiwKICAgICJwcmV2aWV3IjogInZpdGUgcHJldmlldyIsCiAgICAibGludCI6ICJlc2xpbnQgLiAtLW1heC13YXJuaW5ncz0wIiwKICAgICJmb3JtYXQiOiAicHJldHRpZXIgLS13cml0ZSAuIgogIH0sCiAgImRlcGVuZGVuY2llcyI6IHsKICAgICJyZWFjdCI6ICJeMTguMi4wIiwKICAgICJyZWFjdC1kb20iOiAiXjE4LjIuMCIKICB9LAogICJkZXZEZXBlbmRlbmNpZXMiOiB7CiAgICAiQGVzbGludC9qcyI6ICJeOS4wLjAiLAogICAgIkB0eXBlcy9yZWFjdCI6ICJeMTguMi4wIiwKICAgICJAdHlwZXMvcmVhY3QtZG9tIjogIl4xOC4yLjAiLAogICAgIkB2aXRlanMvcGx1Z2luLXJlYWN0IjogIl40LjIuMCIsCiAgICAiZXNsaW50IjogIl45LjAuMCIsCiAgICAiZXNsaW50LWNvbmZpZy1wcmV0dGllciI6ICJeOS4xLjAiLAogICAgImVzbGludC1wbHVnaW4tcmVhY3QiOiAiXjcuMzQuMCIsCiAgICAiZXNsaW50LXBsdWdpbi1yZWFjdC1ob29rcyI6ICJeNC42LjAiLAogICAgImVzbGludC1wbHVnaW4tcmVhY3QtcmVmcmVzaCI6ICJeMC40LjYiLAogICAgImdsb2JhbHMiOiAiXjE1LjAuMCIsCiAgICAicHJldHRpZXIiOiAiXjMuMi4wIiwKICAgICJ0eXBlc2NyaXB0IjogIl41LjQuMCIsCiAgICAidHlwZXNjcmlwdC1lc2xpbnQiOiAiXjcuMC4wIiwKICAgICJ2aXRlIjogIl41LjIuMCIKICB9Cn0NCg==' }
  @{ path = 'frontend/README.md'; b64 = '77u/IyBGcm9udGVuZCAoUmVhY3QgKyBWaXRlICsgVHlwZVNjcmlwdCkKCioqTG9rYWxlciBTdGFydCoqCjEuIGBucG0gaW5zdGFsbGAKMi4gYG5wbSBydW4gZGV2YAoKKipCdWlsZCAmIENoZWNrcyoqCi0gYG5wbSBydW4gYnVpbGRgCi0gYG5wbSBydW4gcHJldmlld2AKLSBgbnBtIHJ1biBsaW50YAotIGBucG0gcnVuIGZvcm1hdGANCg==' }
  @{ path = 'frontend/vite.config.ts'; b64 = '77u/aW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSc7CmltcG9ydCByZWFjdCBmcm9tICdAdml0ZWpzL3BsdWdpbi1yZWFjdCc7CgpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoewogIHBsdWdpbnM6IFtyZWFjdCgpXSwKICBzZXJ2ZXI6IHsKICAgIGhvc3Q6IHRydWUsCiAgICBwb3J0OiA1MTczLAogIH0sCn0pOw0K' }
  @{ path = 'frontend/tsconfig.json'; b64 = '77u/ewogICJjb21waWxlck9wdGlvbnMiOiB7CiAgICAidGFyZ2V0IjogIkVTMjAyMCIsCiAgICAidXNlRGVmaW5lRm9yQ2xhc3NGaWVsZHMiOiB0cnVlLAogICAgImxpYiI6IFsiRVMyMDIwIiwgIkRPTSIsICJET00uSXRlcmFibGUiXSwKICAgICJtb2R1bGUiOiAiRVNOZXh0IiwKICAgICJza2lwTGliQ2hlY2siOiB0cnVlLAogICAgIm1vZHVsZVJlc29sdXRpb24iOiAiQnVuZGxlciIsCiAgICAiYWxsb3dJbXBvcnRpbmdUc0V4dGVuc2lvbnMiOiB0cnVlLAogICAgInJlc29sdmVKc29uTW9kdWxlIjogdHJ1ZSwKICAgICJpc29sYXRlZE1vZHVsZXMiOiB0cnVlLAogICAgIm5vRW1pdCI6IHRydWUsCiAgICAianN4IjogInJlYWN0LWpzeCIsCiAgICAic3RyaWN0IjogdHJ1ZSwKICAgICJub1VudXNlZExvY2FscyI6IHRydWUsCiAgICAibm9VbnVzZWRQYXJhbWV0ZXJzIjogdHJ1ZSwKICAgICJub0ZhbGx0aHJvdWdoQ2FzZXNJblN3aXRjaCI6IHRydWUKICB9LAogICJpbmNsdWRlIjogWyJzcmMiXQp9DQo=' }
  @{ path = 'frontend/tsconfig.node.json'; b64 = '77u/ewogICJjb21waWxlck9wdGlvbnMiOiB7CiAgICAidGFyZ2V0IjogIkVTMjAyMCIsCiAgICAibGliIjogWyJFUzIwMjAiXSwKICAgICJtb2R1bGUiOiAiRVNOZXh0IiwKICAgICJza2lwTGliQ2hlY2siOiB0cnVlLAogICAgIm1vZHVsZVJlc29sdXRpb24iOiAiQnVuZGxlciIsCiAgICAiYWxsb3dJbXBvcnRpbmdUc0V4dGVuc2lvbnMiOiB0cnVlLAogICAgInJlc29sdmVKc29uTW9kdWxlIjogdHJ1ZSwKICAgICJpc29sYXRlZE1vZHVsZXMiOiB0cnVlLAogICAgIm5vRW1pdCI6IHRydWUKICB9LAogICJpbmNsdWRlIjogWyJ2aXRlLmNvbmZpZy50cyJdCn0NCg==' }
  @{ path = 'frontend/eslint.config.js'; b64 = '77u/aW1wb3J0IGpzIGZyb20gJ0Blc2xpbnQvanMnOwppbXBvcnQgZ2xvYmFscyBmcm9tICdnbG9iYWxzJzsKaW1wb3J0IHJlYWN0IGZyb20gJ2VzbGludC1wbHVnaW4tcmVhY3QnOwppbXBvcnQgcmVhY3RIb29rcyBmcm9tICdlc2xpbnQtcGx1Z2luLXJlYWN0LWhvb2tzJzsKaW1wb3J0IHJlYWN0UmVmcmVzaCBmcm9tICdlc2xpbnQtcGx1Z2luLXJlYWN0LXJlZnJlc2gnOwppbXBvcnQgdHNlc2xpbnQgZnJvbSAndHlwZXNjcmlwdC1lc2xpbnQnOwoKZXhwb3J0IGRlZmF1bHQgWwogIHsgaWdub3JlczogWydkaXN0JywgJ25vZGVfbW9kdWxlcyddIH0sCiAganMuY29uZmlncy5yZWNvbW1lbmRlZCwKICAuLi50c2VzbGludC5jb25maWdzLnJlY29tbWVuZGVkLAogIHsKICAgIGZpbGVzOiBbJyoqLyoue3RzLHRzeH0nXSwKICAgIGxhbmd1YWdlT3B0aW9uczogewogICAgICBlY21hVmVyc2lvbjogJ2xhdGVzdCcsCiAgICAgIHNvdXJjZVR5cGU6ICdtb2R1bGUnLAogICAgICBwYXJzZXJPcHRpb25zOiB7CiAgICAgICAgZWNtYUZlYXR1cmVzOiB7IGpzeDogdHJ1ZSB9CiAgICAgIH0sCiAgICAgIGdsb2JhbHM6IGdsb2JhbHMuYnJvd3NlcgogICAgfSwKICAgIHNldHRpbmdzOiB7CiAgICAgIHJlYWN0OiB7IHZlcnNpb246ICdkZXRlY3QnIH0KICAgIH0sCiAgICBwbHVnaW5zOiB7CiAgICAgIHJlYWN0LAogICAgICAncmVhY3QtaG9va3MnOiByZWFjdEhvb2tzLAogICAgICAncmVhY3QtcmVmcmVzaCc6IHJlYWN0UmVmcmVzaAogICAgfSwKICAgIHJ1bGVzOiB7CiAgICAgIC4uLnJlYWN0SG9va3MuY29uZmlncy5yZWNvbW1lbmRlZC5ydWxlcywKICAgICAgJ3JlYWN0L3JlYWN0LWluLWpzeC1zY29wZSc6ICdvZmYnLAogICAgICAncmVhY3QtcmVmcmVzaC9vbmx5LWV4cG9ydC1jb21wb25lbnRzJzogWyd3YXJuJywgeyBhbGxvd0NvbnN0YW50RXhwb3J0OiB0cnVlIH1dCiAgICB9CiAgfQpdOw0K' }
  @{ path = 'frontend/.prettierrc.json'; b64 = '77u/ewogICJzZW1pIjogdHJ1ZSwKICAic2luZ2xlUXVvdGUiOiB0cnVlLAogICJwcmludFdpZHRoIjogMTAwLAogICJ0cmFpbGluZ0NvbW1hIjogImFsbCIsCiAgImFycm93UGFyZW5zIjogImFsd2F5cyIKfQ0K' }
  @{ path = 'frontend/.prettierignore'; b64 = '77u/bm9kZV9tb2R1bGVzCmRpc3QNCg==' }
  @{ path = 'frontend/index.html'; b64 = '77u/PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImRlIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+RmFjZSBLYXJhb2tlIEFJPC90aXRsZT4KICA8L2hlYWQ+CiAgPGJvZHk+CiAgICA8ZGl2IGlkPSJyb290Ij48L2Rpdj4KICAgIDxzY3JpcHQgdHlwZT0ibW9kdWxlIiBzcmM9Ii9zcmMvbWFpbi50c3giPjwvc2NyaXB0PgogIDwvYm9keT4KPC9odG1sPg0K' }
  @{ path = 'frontend/src/vite-env.d.ts'; b64 = '77u/Ly8vIDxyZWZlcmVuY2UgdHlwZXM9InZpdGUvY2xpZW50IiAvPg0K' }
  @{ path = 'frontend/src/main.tsx'; b64 = '77u/aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbS9jbGllbnQnOwppbXBvcnQgQXBwIGZyb20gJy4vQXBwJzsKaW1wb3J0ICcuL3N0eWxlcy5jc3MnOwoKUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpISkucmVuZGVyKAogIDxSZWFjdC5TdHJpY3RNb2RlPgogICAgPEFwcCAvPgogIDwvUmVhY3QuU3RyaWN0TW9kZT4sCik7DQo=' }
  @{ path = 'frontend/src/App.tsx'; b64 = '77u/aW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKCmNvbnN0IENPUFkgPSB7CiAgdGl0bGU6ICdGYWNlIEthcmFva2UgQUknLAogIHN1YnRpdGxlOiAnV2ViY2FtICsgQ2FudmFzIE92ZXJsYXkgU2tlbGV0b24gKFJlYWN0ICsgVml0ZSArIFR5cGVTY3JpcHQpJywKICBoaW50OiAnSGllciBlbnRzdGVodCBkaWUgTGl2ZS1QcmV2aWV3IGbDvHIgVHJhY2tpbmcgJiBXZWIgQXVkaW8gKFdlYiBBdWRpbykg4oCTIEJhY2tlbmQgZm9sZ3QuJywKfTsKCmZ1bmN0aW9uIEFwcCgpIHsKICBjb25zdCB2aWRlb1JlZiA9IHVzZVJlZjxIVE1MVmlkZW9FbGVtZW50IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmPEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW3N0cmVhbSwgc2V0U3RyZWFtXSA9IHVzZVN0YXRlPE1lZGlhU3RyZWFtIHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW2lzU3RhcnRpbmcsIHNldElzU3RhcnRpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7CgogIGNvbnN0IHN0b3BTdHJlYW0gPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBzdHJlYW0/LmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpOwogICAgaWYgKHZpZGVvUmVmLmN1cnJlbnQpIHsKICAgICAgdmlkZW9SZWYuY3VycmVudC5zcmNPYmplY3QgPSBudWxsOwogICAgfQogICAgc2V0U3RyZWFtKG51bGwpOwogIH0sIFtzdHJlYW1dKTsKCiAgY29uc3Qgc3RhcnRTdHJlYW0gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7CiAgICBpZiAoc3RyZWFtIHx8IGlzU3RhcnRpbmcpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcz8uZ2V0VXNlck1lZGlhKSB7CiAgICAgIHNldEVycm9yKCdXZWJjYW0gd2lyZCBpbiBkaWVzZW0gQnJvd3NlciBuaWNodCB1bnRlcnN0w7x0enQuJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzZXRJc1N0YXJ0aW5nKHRydWUpOwogICAgc2V0RXJyb3IobnVsbCk7CgogICAgdHJ5IHsKICAgICAgY29uc3QgbWVkaWFTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgICAgdmlkZW86IHsKICAgICAgICAgIHdpZHRoOiB7IGlkZWFsOiAxMjgwIH0sCiAgICAgICAgICBoZWlnaHQ6IHsgaWRlYWw6IDcyMCB9LAogICAgICAgICAgZmFjaW5nTW9kZTogJ3VzZXInLAogICAgICAgIH0sCiAgICAgICAgYXVkaW86IGZhbHNlLAogICAgICB9KTsKCiAgICAgIHNldFN0cmVhbShtZWRpYVN0cmVhbSk7CgogICAgICBpZiAodmlkZW9SZWYuY3VycmVudCkgewogICAgICAgIHZpZGVvUmVmLmN1cnJlbnQuc3JjT2JqZWN0ID0gbWVkaWFTdHJlYW07CiAgICAgICAgYXdhaXQgdmlkZW9SZWYuY3VycmVudC5wbGF5KCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIHNldEVycm9yKCdadWdyaWZmIGF1ZiBkaWUgV2ViY2FtIGZlaGxnZXNjaGxhZ2VuLiBCaXR0ZSBCZXJlY2h0aWd1bmcgcHLDvGZlbi4nKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHNldElzU3RhcnRpbmcoZmFsc2UpOwogICAgfQogIH0sIFtzdHJlYW0sIGlzU3RhcnRpbmddKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IHZpZGVvID0gdmlkZW9SZWYuY3VycmVudDsKICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50OwoKICAgIGlmICghdmlkZW8gfHwgIWNhbnZhcykgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQoKICAgIGNvbnN0IHN5bmNTaXplID0gKCkgPT4gewogICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoIHx8IDEyODA7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodCB8fCA3MjA7CiAgICB9OwoKICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgc3luY1NpemUpOwogICAgc3luY1NpemUoKTsKCiAgICByZXR1cm4gKCkgPT4gewogICAgICB2aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIHN5bmNTaXplKTsKICAgIH07CiAgfSwgW3N0cmVhbV0pOwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmV0dXJuICgpID0+IHsKICAgICAgc3RyZWFtPy5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdHJhY2suc3RvcCgpKTsKICAgIH07CiAgfSwgW3N0cmVhbV0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9ImFwcCI+CiAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPSJoZWFkZXIiPgogICAgICAgIDxkaXY+CiAgICAgICAgICA8aDE+e0NPUFkudGl0bGV9PC9oMT4KICAgICAgICAgIDxwPntDT1BZLnN1YnRpdGxlfTwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHN0YXR1cyAke3N0cmVhbSA/ICdvbicgOiAnb2ZmJ31gfT4KICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iZG90IiAvPgogICAgICAgICAgPHNwYW4+e3N0cmVhbSA/ICdXZWJjYW0gYWt0aXYnIDogJ1dlYmNhbSBpbmFrdGl2J308L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvaGVhZGVyPgoKICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPSJjb250cm9scyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9InByaW1hcnkiIG9uQ2xpY2s9e3N0YXJ0U3RyZWFtfSBkaXNhYmxlZD17ISFzdHJlYW0gfHwgaXNTdGFydGluZ30+CiAgICAgICAgICB7aXNTdGFydGluZyA/ICdTdGFydGXigKYnIDogJ1N0YXJ0IFdlYmNhbSd9CiAgICAgICAgPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9Imdob3N0IiBvbkNsaWNrPXtzdG9wU3RyZWFtfSBkaXNhYmxlZD17IXN0cmVhbX0+CiAgICAgICAgICBTdG9wIFdlYmNhbQogICAgICAgIDwvYnV0dG9uPgogICAgICAgIHtlcnJvciAmJiA8c3BhbiBjbGFzc05hbWU9ImVycm9yIj57ZXJyb3J9PC9zcGFuPn0KICAgICAgPC9zZWN0aW9uPgoKICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPSJzdGFnZSI+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InZpZGVvLXdyYXAiPgogICAgICAgICAgPHZpZGVvIHJlZj17dmlkZW9SZWZ9IHBsYXlzSW5saW5lIG11dGVkIC8+CiAgICAgICAgICA8Y2FudmFzIHJlZj17Y2FudmFzUmVmfSAvPgogICAgICAgIDwvZGl2PgogICAgICAgIDxhc2lkZSBjbGFzc05hbWU9ImhpbnQiPntDT1BZLmhpbnR9PC9hc2lkZT4KICAgICAgPC9zZWN0aW9uPgogICAgPC9kaXY+CiAgKTsKfQoKZXhwb3J0IGRlZmF1bHQgQXBwOw0K' }
  @{ path = 'frontend/src/styles.css'; b64 = '77u/OnJvb3QgewogIGZvbnQtZmFtaWx5OiAiU3BhY2UgR3JvdGVzayIsICJTZWdvZSBVSSIsIHN5c3RlbS11aSwgc2Fucy1zZXJpZjsKICBjb2xvcjogIzBmMTcyYTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmYWZjOwp9CgoqIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9Cgpib2R5IHsKICBtYXJnaW46IDA7CiAgbWluLWhlaWdodDogMTAwdmg7CiAgYmFja2dyb3VuZDogcmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCB0b3AsICNlMmU4ZjAgMCUsICNmOGZhZmMgNTUlLCAjZmZmZmZmIDEwMCUpOwp9Cgojcm9vdCB7CiAgbWluLWhlaWdodDogMTAwdmg7Cn0KCi5hcHAgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDI0cHg7CiAgcGFkZGluZzogMzJweDsKICBtYXgtd2lkdGg6IDEyMDBweDsKICBtYXJnaW46IDAgYXV0bzsKfQoKLmhlYWRlciB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgZ2FwOiAxNnB4Owp9CgouaGVhZGVyIGgxIHsKICBtYXJnaW46IDAgMCA4cHg7CiAgZm9udC1zaXplOiBjbGFtcCgyOHB4LCAzdncsIDQwcHgpOwp9CgouaGVhZGVyIHAgewogIG1hcmdpbjogMDsKICBjb2xvcjogIzQ3NTU2OTsKfQoKLnN0YXR1cyB7CiAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBnYXA6IDEwcHg7CiAgcGFkZGluZzogMTBweCAxNHB4OwogIGJvcmRlci1yYWRpdXM6IDk5OXB4OwogIGZvbnQtc2l6ZTogMTRweDsKICBiYWNrZ3JvdW5kOiAjZjFmNWY5OwogIGNvbG9yOiAjNDc1NTY5Owp9Cgouc3RhdHVzLm9uIHsKICBiYWNrZ3JvdW5kOiAjZGNmY2U3OwogIGNvbG9yOiAjMTY2NTM0Owp9Cgouc3RhdHVzLm9mZiB7CiAgYmFja2dyb3VuZDogI2ZlZTJlMjsKICBjb2xvcjogIzk5MWIxYjsKfQoKLnN0YXR1cyAuZG90IHsKICB3aWR0aDogMTBweDsKICBoZWlnaHQ6IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGJhY2tncm91bmQ6IGN1cnJlbnRDb2xvcjsKfQoKLmNvbnRyb2xzIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcDsKICBnYXA6IDEycHg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKYnV0dG9uIHsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLXJhZGl1czogOTk5cHg7CiAgcGFkZGluZzogMTJweCAyMHB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgY3Vyc29yOiBwb2ludGVyOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjE1cyBlYXNlLCBib3gtc2hhZG93IDAuMTVzIGVhc2U7Cn0KCmJ1dHRvbjpkaXNhYmxlZCB7CiAgb3BhY2l0eTogMC42OwogIGN1cnNvcjogbm90LWFsbG93ZWQ7Cn0KCmJ1dHRvbi5wcmltYXJ5IHsKICBiYWNrZ3JvdW5kOiAjMGVhNWU5OwogIGNvbG9yOiB3aGl0ZTsKICBib3gtc2hhZG93OiAwIDhweCAyMHB4IHJnYmEoMTQsIDE2NSwgMjMzLCAwLjI1KTsKfQoKYnV0dG9uLnByaW1hcnk6aG92ZXI6bm90KDpkaXNhYmxlZCkgewogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsKfQoKYnV0dG9uLmdob3N0IHsKICBiYWNrZ3JvdW5kOiAjZmZmZmZmOwogIGNvbG9yOiAjMGYxNzJhOwogIGJvcmRlcjogMXB4IHNvbGlkICNjYmQ1ZjU7Cn0KCi5lcnJvciB7CiAgY29sb3I6ICNiOTFjMWM7CiAgZm9udC1zaXplOiAxNHB4Owp9Cgouc3RhZ2UgewogIGRpc3BsYXk6IGdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtaW5tYXgoMCwgMWZyKSAyNjBweDsKICBnYXA6IDI0cHg7CiAgYWxpZ24taXRlbXM6IHN0YXJ0Owp9CgoudmlkZW8td3JhcCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiAxMDAlOwogIGFzcGVjdC1yYXRpbzogMTYgLyA5OwogIGJvcmRlci1yYWRpdXM6IDE4cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBiYWNrZ3JvdW5kOiAjMGYxNzJhOwogIGJveC1zaGFkb3c6IDAgMjBweCA0MHB4IHJnYmEoMTUsIDIzLCA0MiwgMC4yKTsKfQoKdmlkZW8sCmNhbnZhcyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGluc2V0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBvYmplY3QtZml0OiBjb3ZlcjsKfQoKY2FudmFzIHsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQoKLmhpbnQgewogIHBhZGRpbmc6IDE2cHg7CiAgYm9yZGVyLXJhZGl1czogMTZweDsKICBiYWNrZ3JvdW5kOiAjZmZmN2VkOwogIGNvbG9yOiAjOWEzNDEyOwogIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDFweCByZ2JhKDE1NCwgNTIsIDE4LCAwLjE1KTsKICBmb250LXNpemU6IDE0cHg7Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCkgewogIC5oZWFkZXIgewogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICB9CgogIC5zdGFnZSB7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsKICB9Cn0NCg==' }
  @{ path = 'backend/README.md'; b64 = '77u/IyBCYWNrZW5kIChGYXN0QVBJKQoKKipMb2thbGVyIFN0YXJ0KioKMS4gYHB5dGhvbiAtbSB2ZW52IC52ZW52YAoyLiBgLlwudmVudlxTY3JpcHRzXEFjdGl2YXRlLnBzMWAKMy4gYHBpcCBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHRgCjQuIGB1dmljb3JuIGFwcC5tYWluOmFwcCAtLXJlbG9hZCAtLWhvc3QgMC4wLjAuMCAtLXBvcnQgODAwMGAKCioqSGVhbHRoIENoZWNrKioKLSBgY3VybCBodHRwOi8vbG9jYWxob3N0OjgwMDAvaGVhbHRoYAoKKipMaW50IChvcHRpb25hbCwgUnVmZikqKgotIGBwaXAgaW5zdGFsbCBydWZmYAotIGBydWZmIGNoZWNrIC5gDQo=' }
  @{ path = 'backend/requirements.txt'; b64 = '77u/ZmFzdGFwaQp1dmljb3JuW3N0YW5kYXJkXQpweXRob24tbXVsdGlwYXJ0CnB5ZGFudGljDQo=' }
  @{ path = 'backend/app/__init__.py'; b64 = '' }
  @{ path = 'backend/app/main.py'; b64 = '77u/ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBmYXN0YXBpIGltcG9ydCBGYXN0QVBJCmZyb20gZmFzdGFwaS5taWRkbGV3YXJlLmNvcnMgaW1wb3J0IENPUlNNaWRkbGV3YXJlCgpmcm9tIGFwcC5hcGkud3MgaW1wb3J0IHJvdXRlciBhcyB3c19yb3V0ZXIKZnJvbSBhcHAuY29yZS5jb25maWcgaW1wb3J0IGxvYWRfc2V0dGluZ3MKZnJvbSBhcHAuY29yZS5sb2dnaW5nIGltcG9ydCBjb25maWd1cmVfbG9nZ2luZywgZ2V0X2xvZ2dlcgoKc2V0dGluZ3MgPSBsb2FkX3NldHRpbmdzKCkKY29uZmlndXJlX2xvZ2dpbmcoc2V0dGluZ3MubG9nX2xldmVsKQpsb2dnZXIgPSBnZXRfbG9nZ2VyKF9fbmFtZV9fKQoKYXBwID0gRmFzdEFQSSh0aXRsZT1zZXR0aW5ncy5hcHBfbmFtZSkKCmFwcC5hZGRfbWlkZGxld2FyZSgKICAgIENPUlNNaWRkbGV3YXJlLAogICAgYWxsb3dfb3JpZ2lucz1zZXR0aW5ncy5hbGxvd2VkX29yaWdpbnMsCiAgICBhbGxvd19jcmVkZW50aWFscz1UcnVlLAogICAgYWxsb3dfbWV0aG9kcz1bIioiXSwKICAgIGFsbG93X2hlYWRlcnM9WyIqIl0sCikKCgpAYXBwLmdldCgiL2hlYWx0aCIpCmFzeW5jIGRlZiBoZWFsdGgoKSAtPiBkaWN0W3N0ciwgc3RyXToKICAgIHJldHVybiB7InN0YXR1cyI6ICJvayJ9CgoKYXBwLmluY2x1ZGVfcm91dGVyKHdzX3JvdXRlciwgcHJlZml4PSIvd3MiKQ0K' }
  @{ path = 'backend/app/api/__init__.py'; b64 = '' }
  @{ path = 'backend/app/api/ws.py'; b64 = '77u/ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBmYXN0YXBpIGltcG9ydCBBUElSb3V0ZXIsIFdlYlNvY2tldAoKcm91dGVyID0gQVBJUm91dGVyKCkKCgpAcm91dGVyLndlYnNvY2tldCgiL3N0cmVhbSIpCmFzeW5jIGRlZiB3ZWJzb2NrZXRfc3RyZWFtKHdlYnNvY2tldDogV2ViU29ja2V0KSAtPiBOb25lOgogICAgYXdhaXQgd2Vic29ja2V0LmFjY2VwdCgpCiAgICBhd2FpdCB3ZWJzb2NrZXQuc2VuZF9qc29uKHsic3RhdHVzIjogImNvbm5lY3RlZCJ9KQogICAgYXdhaXQgd2Vic29ja2V0LmNsb3NlKCkNCg==' }
  @{ path = 'backend/app/core/__init__.py'; b64 = '' }
  @{ path = 'backend/app/core/config.py'; b64 = '77u/ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IG9zCmZyb20gcHlkYW50aWMgaW1wb3J0IEJhc2VNb2RlbAoKCmNsYXNzIFNldHRpbmdzKEJhc2VNb2RlbCk6CiAgICBhcHBfbmFtZTogc3RyID0gIkZhY2UgS2FyYW9rZSBBSSIKICAgIGFsbG93ZWRfb3JpZ2luczogbGlzdFtzdHJdCiAgICBsb2dfbGV2ZWw6IHN0ciA9ICJJTkZPIgoKCmRlZiBsb2FkX3NldHRpbmdzKCkgLT4gU2V0dGluZ3M6CiAgICBvcmlnaW5zID0gb3MuZ2V0ZW52KCJBTExPV0VEX09SSUdJTlMiLCAiaHR0cDovL2xvY2FsaG9zdDo1MTczIikKICAgIGFsbG93ZWRfb3JpZ2lucyA9IFtvcmlnaW4uc3RyaXAoKSBmb3Igb3JpZ2luIGluIG9yaWdpbnMuc3BsaXQoIiwiKSBpZiBvcmlnaW4uc3RyaXAoKV0KICAgIHJldHVybiBTZXR0aW5ncygKICAgICAgICBhcHBfbmFtZT1vcy5nZXRlbnYoIkFQUF9OQU1FIiwgIkZhY2UgS2FyYW9rZSBBSSIpLAogICAgICAgIGFsbG93ZWRfb3JpZ2lucz1hbGxvd2VkX29yaWdpbnMsCiAgICAgICAgbG9nX2xldmVsPW9zLmdldGVudigiTE9HX0xFVkVMIiwgIklORk8iKSwKICAgICkNCg==' }
  @{ path = 'backend/app/core/logging.py'; b64 = '77u/aW1wb3J0IGxvZ2dpbmcKCgpkZWYgY29uZmlndXJlX2xvZ2dpbmcobGV2ZWw6IHN0ciA9ICJJTkZPIikgLT4gTm9uZToKICAgIGxvZ2dpbmcuYmFzaWNDb25maWcoCiAgICAgICAgbGV2ZWw9bGV2ZWwsCiAgICAgICAgZm9ybWF0PSIlKGFzY3RpbWUpcyB8ICUobGV2ZWxuYW1lKXMgfCAlKG5hbWUpcyB8ICUobWVzc2FnZSlzIiwKICAgICkKCgpkZWYgZ2V0X2xvZ2dlcihuYW1lOiBzdHIpIC0+IGxvZ2dpbmcuTG9nZ2VyOgogICAgcmV0dXJuIGxvZ2dpbmcuZ2V0TG9nZ2VyKG5hbWUpDQo=' }
  @{ path = '.github/workflows/.gitkeep'; b64 = '' }
  @{ path = 'scripts/.gitkeep'; b64 = '' }
)

# Write each file in the manifest to the target directory.
foreach ($item in $manifest) {
  $dest = Join-Path $TargetRoot $item.path
  $dir = Split-Path $dest -Parent
  if ($dir -and -not (Test-Path $dir)) { New-Item -ItemType Directory -Force -Path $dir | Out-Null }
  $bytes = [Convert]::FromBase64String($item.b64)
  [System.IO.File]::WriteAllBytes($dest, $bytes)
}

# Done.
Write-Host "Bootstrap complete."


